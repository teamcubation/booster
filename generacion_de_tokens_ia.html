<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IA: El Secreto de la Generación de Tokens</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Usamos una fuente de sistema que se parezca a Helvetica Neue */
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Roboto', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background-color: #333333; /* Un gris ligeramente más claro que #484848 para el fondo general */
        }

        /* Configuración de colores de la marca en Tailwind */
        .bg-brand-violet { background-color: #551872; }
        .bg-brand-orange { background-color: #F34E1E; }
        .bg-brand-gray { background-color: #484848; }
        .bg-brand-green { background-color: #8BDCB3; }

        .text-brand-violet { color: #551872; }
        .text-brand-orange { color: #F34E1E; }
        .text-brand-gray { color: #484848; }
        .text-brand-green { color: #8BDCB3; }
        .text-brand-green-darker { color: #6cac90; }

        .border-brand-orange { border-color: #F34E1E; }
        
        .btn-primary {
            background-color: #F34E1E;
            color: white;
            font-weight: 500;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .btn-primary:hover {
            background-color: #d94015;
            transform: translateY(-2px);
        }
        .btn-primary:disabled {
            background-color: #f7a289;
            cursor: not-allowed;
            transform: none;
        }

        /* Estilos para los tokens */
        .token {
            display: inline-block;
            padding: 0.25rem 0.6rem;
            margin: 0.2rem;
            border-radius: 0.375rem;
            font-size: 0.9rem;
            font-weight: 500;
            animation: pop-in 0.4s ease forwards;
            opacity: 0;
            transform: scale(0.8);
        }
        
        .prompt-token {
            background-color: #8BDCB3;
            color: #333;
            border: 1px solid #6cac90;
        }

        .response-token {
            background-color: #F34E1E;
            color: white;
            border: 1px solid #d94015;
        }
        
        /* Animación para la aparición de tokens */
        @keyframes pop-in {
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        /* Cursor de "pensando" */
        .thinking-cursor::after {
            content: '▋';
            animation: blink 1s step-end infinite;
            color: #F34E1E;
            margin-left: 0.25rem;
        }

        @keyframes blink {
            from, to { opacity: 1; }
            50% { opacity: 0; }
        }

    </style>
</head>
<body class="text-gray-200">

    <div class="container mx-auto p-4 sm:p-6 md:p-12 max-w-5xl">
        
        <!-- Cabecera -->
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold mb-2">
                <span class="text-brand-orange">El Arte</span> de Conversar con una IA
            </h1>
            <p class="text-xl text-gray-400 font-light">Descubre el secreto detrás de cada respuesta: la generación de tokens.</p>
        </header>

        <!-- Sección de Introducción/Analogía -->
        <section class="mb-12 text-center max-w-3xl mx-auto">
             <h2 class="text-2xl font-medium mb-4 text-brand-green">¿Cómo "piensa" una IA para responder?</h2>
             <p class="text-lg text-gray-300 font-light leading-relaxed">
                Imagina que la IA no escribe palabras, sino que construye sus respuestas con pequeñas piezas, como si fueran bloques de LEGO®. A estas piezas las llamamos <strong class="font-medium text-white">tokens</strong>. Un token puede ser una palabra entera, una parte de ella, o un signo de puntuación. La magia está en cómo elige el siguiente bloque, uno por uno, para formar la respuesta perfecta.
            </p>
        </section>

        <!-- Demostración Interactiva -->
        <main class="bg-brand-gray p-6 sm:p-8 rounded-xl shadow-2xl border border-gray-700">
            
            <div class="mb-6">
                <label for="prompt-input" class="block text-lg font-medium mb-2 text-brand-green">1. Escribe tu instrucción (prompt)</label>
                <p class="text-sm text-gray-400 mb-3 font-light">Prueba con preguntas como "¿Qué es la fotosíntesis?" o "Escribe un haiku sobre la lluvia".</p>
                <textarea id="prompt-input" rows="3" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-brand-orange transition" placeholder="Ej: Explica qué son los tokens de una IA...">Explica qué son los tokens de una IA...</textarea>
            </div>
            
            <div class="text-center mb-8">
                <button id="generate-btn" class="btn-primary text-lg">
                    ¡Generar Respuesta!
                </button>
            </div>

            <div class="space-y-8">
                <!-- Visualización del Prompt Tokenizado -->
                <div>
                    <h3 class="text-lg font-medium mb-3 text-brand-green">2. La IA descompone tu prompt en tokens</h3>
                    <div id="prompt-tokens-container" class="bg-gray-900/50 p-4 rounded-lg min-h-[4rem] flex flex-wrap items-center">
                        <span class="text-gray-500 font-light">Aquí aparecerán los tokens de tu prompt...</span>
                    </div>
                </div>

                <!-- Visualización de la Respuesta Generada -->
                <div>
                    <h3 class="text-lg font-medium mb-3 text-brand-green">3. La IA genera su respuesta, token por token</h3>
                     <div id="response-container" class="bg-gray-900/50 p-4 rounded-lg min-h-[6rem]">
                         <span class="text-gray-500 font-light">La respuesta de la IA se construirá aquí...</span>
                     </div>
                </div>
            </div>

        </main>
        
        <!-- Reflexión Final -->
        <section class="mt-12 text-center max-w-3xl mx-auto">
             <h2 class="text-2xl font-medium mb-4 text-brand-green">De Tokens a Conversaciones</h2>
             <p class="text-lg text-gray-300 font-light leading-relaxed">
                ¡Lo has visto en acción! La IA no "sabe" la respuesta completa desde el inicio. Analiza tu petición y luego, en un proceso increíblemente rápido, predice el token más probable para continuar la conversación. Cada nuevo token se basa en todos los anteriores, creando así respuestas coherentes y creativas.
            </p>
            <p class="mt-4 text-lg text-gray-300 font-light leading-relaxed">
                Este proceso, repetido miles de veces por segundo, es lo que permite que la IA generativa pueda escribir, resumir, traducir y crear.
            </p>
        </section>

        <!-- Footer -->
        <footer class="text-center mt-16 p-4 border-t border-gray-700">
            <p class="text-gray-500">Un recurso interactivo de <span class="font-bold text-brand-violet">Team</span><span class="font-bold text-brand-orange">cubation</span></p>
        </footer>

    </div>

    <script>
        const promptInput = document.getElementById('prompt-input');
        const generateBtn = document.getElementById('generate-btn');
        const promptTokensContainer = document.getElementById('prompt-tokens-container');
        const responseContainer = document.getElementById('response-container');

        // Respuestas predefinidas para la demo
        const cannedResponses = {
            default: "Los tokens son las unidades básicas que una IA procesa. Piensa en ellos como las palabras o fragmentos de texto que la IA utiliza para entender y generar lenguaje. Cada token se predice uno tras otro para construir la respuesta completa.",
            fotosintesis: "La fotosíntesis es el proceso que las plantas usan para convertir la luz solar, el agua y el dióxido de carbono en glucosa, que es su alimento, y oxígeno, que liberan al aire. Es fundamental para la vida en la Tierra.",
            haiku: "Gotas de cristal, danzan sobre el asfalto, el mundo se limpia.",
            tokens: "¡Exacto! Los tokens son las piezas con las que construyo mis respuestas. Como acabas de ver, los analizo en tu pregunta y luego los genero uno por uno para responderte de la forma más coherente posible."
        };
        
        // Una función simple para "tokenizar" texto (separa por espacios y puntuación)
        function tokenize(text) {
            if (!text) return [];
            return text.match(/[\w']+|[.,!?;:]|\s+/g) || [];
        }
        
        function displayTokens(container, tokens, cssClass, initialDelay = 0) {
            container.innerHTML = '';
            tokens.forEach((tokenText, index) => {
                // No crear un elemento visible para los espacios, pero mantener el delay
                if (tokenText.trim() === '') {
                    return;
                }
                const tokenEl = document.createElement('span');
                tokenEl.textContent = tokenText;
                tokenEl.className = `token ${cssClass}`;
                // Aplicar delay para la animación secuencial
                tokenEl.style.animationDelay = `${initialDelay + index * 50}ms`;
                container.appendChild(tokenEl);
            });
        }

        async function displayResponseSequentially(text) {
            responseContainer.innerHTML = ''; // Limpiar contenedor
            responseContainer.classList.add('thinking-cursor');

            const tokens = tokenize(text);
            
            for (let i = 0; i < tokens.length; i++) {
                const tokenText = tokens[i];
                if (tokenText.trim() !== '') {
                    const tokenEl = document.createElement('span');
                    tokenEl.textContent = tokenText;
                    tokenEl.className = 'token response-token';
                    // La animación 'pop-in' se aplica por defecto por CSS
                    // No necesitamos delay de animación aquí porque los añadimos secuencialmente
                    responseContainer.appendChild(tokenEl);
                } else {
                    // Añade un espacio literal
                    responseContainer.append(' ');
                }
                
                // Espera un poco antes de añadir el siguiente token
                await new Promise(resolve => setTimeout(resolve, 80));
            }
            
            responseContainer.classList.remove('thinking-cursor');
        }

        generateBtn.addEventListener('click', async () => {
            const promptText = promptInput.value.trim();
            if (!promptText) return;

            // Deshabilitar botón para evitar clics múltiples
            generateBtn.disabled = true;
            generateBtn.textContent = 'Generando...';

            // 1. Tokenizar y mostrar el prompt del usuario
            const promptTokens = tokenize(promptText);
            displayTokens(promptTokensContainer, promptTokens, 'prompt-token');
            
            // 2. Limpiar la respuesta anterior y seleccionar una respuesta predefinida
            responseContainer.innerHTML = '<span class="text-gray-500 font-light">La IA está "pensando"...</span>';
            await new Promise(resolve => setTimeout(resolve, 500)); // Pequeña pausa dramática

            let responseText = cannedResponses.default;
            const lowerCasePrompt = promptText.toLowerCase();

            if (lowerCasePrompt.includes('fotosintesis')) {
                responseText = cannedResponses.fotosintesis;
            } else if (lowerCasePrompt.includes('haiku') || lowerCasePrompt.includes('poema')) {
                responseText = cannedResponses.haiku;
            } else if (lowerCasePrompt.includes('token')) {
                responseText = cannedResponses.tokens;
            }

            // 3. Mostrar la respuesta de la IA de forma secuencial
            await displayResponseSequentially(responseText);

            // Reactivar el botón
            generateBtn.disabled = false;
            generateBtn.textContent = '¡Generar Otra Respuesta!';
        });

    </script>
</body>
</html>
